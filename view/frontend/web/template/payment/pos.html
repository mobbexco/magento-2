<!-- ko foreach: availablePOS -->
<div class="payment-method" data-bind="css: {'_active': $parent.selectedOption() == uid && $parent.isActive()}">
    <div class="payment-method-title field choice">
        <input type="radio" 
            name="payment[method]"
            attr="id: 'payment_method_' + uid"
            click="$parent.selectPaymentMethod.bind($parent)"
            ko-value="uid"
            ko-checked="$parent.selectedOption"
            />
        <label data-bind="attr: {for: 'payment_method_' + uid}">
            <span data-bind="text: name"></span>
        </label>
    </div>
    <!-- ko if: $parent.selectedOption() === uid && $parent.isActive() -->
    <div class="payment-method-content">
        <each args="$parent.getRegion('messages')" render=""></each>
        <div class="payment-method-billing-address">
            <each args="$parents[1].getRegion($parent.getBillingAddressFormName())" render=""></each>
        </div>
        <div class="checkout-agreements-block">
            <each args="$parents[1].getRegion('before-place-order')" render=""></each>
        </div>
        <div class="actions-toolbar">
            <!-- ko if: $parent.pollInterval() -->
                <h2>Esperando estado del pago</h2>
                <div class="mobbex-pos-status" data-bind="text: $parent.pollMessage()"></div>
                <div class="primary">
                    <button type="submit" class="action primary checkout"
                        data-bind="click: $parent.cancelPayment.bind($parent)">
                        <span data-bind="i18n: 'Cancelar Pago'"></span>
                    </button>
                    <button type="submit" class="action primary checkout"
                        data-bind="click: $parent.goToReturnUrl.bind($parent), enable: $parent.isPlaceOrderActionAllowed()">
                        <span data-bind="i18n: 'Continuar'"></span>
                    </button>
                </div>
            <!-- /ko -->

            <!-- ko if: $parent.processResult() -->
                <h2>Estado del pago: <span data-bind="text: $parent.processResult()?.label"></span></h2>
                <!-- ko if: $parent.approvedTypes.includes($parent.processResult()?.type) -->
                    <h3>Ser√° redirijido en unos segundos...</h3>
                <!-- /ko -->

                <!-- ko if: !$parent.approvedTypes.includes($parent.processResult()?.type) -->
                    <div class="primary">
                        <button type="submit" class="action primary checkout"
                            data-bind="click: $parent.retryPayment.bind($parent)">
                            <span data-bind="i18n: 'Reintentar Pago'"></span>
                        </button>
                        <button type="submit" class="action primary checkout"
                            data-bind="click: $parent.goToReturnUrl.bind($parent), enable: $parent.isPlaceOrderActionAllowed()">
                            <span data-bind="i18n: 'Realizar otro pedido'"></span>
                        </button>
                    </div>
                <!-- /ko -->
            <!-- /ko -->

            <!-- ko if: !$parent.pollInterval() && !$parent.processResult() -->
            <div class="primary">
                <button type="submit" class="action primary checkout"
                    data-bind="click: $parent.processPayment.bind($parent), enable: $parent.isPlaceOrderActionAllowed()">
                    <span data-bind="i18n: $parent.orderPlaced() ? 'Procesar Pago' : 'Place Order'"></span>
                </button>
            </div>
            <!-- /ko -->
        </div>
    </div>
    <!-- /ko -->
</div>
<!-- /ko -->
